<html>
<script>
  const url = "ws://localhost:3123";

  function connect() {
    const ws = this.ws = new WebSocket(url, ["gsb+flexbuffers"]);

    const onOpen = (e) => {
      console.log("Connected to " + url, e);
    }

    const onMessage = (e) => {
      console.log("Received message: ", e);
    }

    const onError = (e) => {
      console.log("Error: ", e);
    }

    const onClose = (e) => {
      console.log("Disconnected: ", e.reason, e);
    }

    ws.binaryType = "arraybuffer";
    ws.addEventListener("open", onOpen);
    ws.addEventListener("message", onMessage);
    ws.addEventListener("error", onError);
    ws.addEventListener("close", onClose);
  }

  function runDeno() {
    const key = document.querySelector("#apikey").value;
    window["gftpMain"](key);
  }

</script>
<script src="test-ftp.ts" type="module"></script>
<body>
<button onclick="connect()">Connect - plain websocket to test server</button>
<hr/>
<input type="text" id="apikey" placeholder="API Key"/>
<button onclick="runDeno()">Run deno gftp example</button>
</body>
</html>